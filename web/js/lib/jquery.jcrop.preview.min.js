/*! ElleOL Designs - v0.0.1 - 2013-03-31
* http://elleol.com
* Includes: jquery.jcrop.preview.js
* Copyright (c) 2013 Jarad DeLorenzo; */
(function(a){a.fn.JcropPreview=function(b){var c={jcropImg:null,defaultWidth:100,defaultHeight:100},b=a.extend(c,b);return b.jcropImg=a(b.jcropImg),this.each(function(){var c=a(this);c.empty();var d=c.attr("style")!=null&&c.attr("style").indexOf("width")>-1?c.width():b.defaultWidth,e=c.attr("style")!=null&&c.attr("style").indexOf("height")>-1?c.height():b.defaultHeight;c.css({width:d+"px",height:e+"px",overflow:"hidden"});var f=a("<div />").css({overflow:"hidden"}).addClass("innerPreview").appendTo(c),g=a("<img />").attr("src",b.jcropImg.attr("src")).appendTo(f),h=function(h){if(parseInt(h.w)<=0||parseInt(h.h)<=0)return;b.jcropRef==null&&(b.jcropRef=a(b.jcropImg).data("Jcrop"));var i=b.jcropRef.getWidgetSize(),j=b.jcropRef.getOptions,k=h.w/h.h;j!=null&&j().aspectRatio&&(k=j().aspectRatio);var l=k>=d/e?d:e*k,m=k<d/e?e:d/k;f.css({width:Math.ceil(l)+"px",height:Math.ceil(m)+"px",marginTop:(e-m)/2+"px",marginLeft:(d-l)/2+"px",overflow:"hidden"}),c.css({});var n=l/h.w,o=m/h.h;g.css({width:Math.round(n*i[0])+"px",height:Math.round(o*i[1])+"px",marginLeft:"-"+Math.round(n*h.x)+"px",marginTop:"-"+Math.round(o*h.y)+"px"})};c.data("updateFunc",h)})},a.fn.JcropPreviewUpdate=function(b){return this.each(function(){a(this).data("updateFunc")(b)})},a.fn.JcropPreviewUpdateFn=function(){var b=a(this);return function(a){b.data("updateFunc")(a)}}})(jQuery);